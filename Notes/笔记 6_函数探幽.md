# 笔记 6 -- 函数探幽    （第八章）

### <span id = "0">0. 目录</span>
* [1. C++内联函数](#1)

### <span id = "1">1. C++内联函数</span> --> [目录](#0)
* 内联函数是C++**为提高程序运行速度所做的一项改进**。
    * 常规函数与内联函数的主要区别不在于编写方式，而**在于C++编译器如何将它们组合到程序中**。

* 可执行程序由一组机器语言指令组成，每条指令都有特定的地址。**常规函数调用使程序跳到另一个地址（函数的地址），并在函数结束时返回**。

* **对于内联函数，编译器使用相应的代码替换函数调用**，因此程序无需跳到另一个位置去执行代码。内联函数的运行速度比常规函数稍快，但代价是需要占用更多的内存。
    * 应有选择地使用内联函数，比如代码执行时间很短且经常被调用的函数。

* 内联函数必须在函数声明或函数定义前加上关键词`inline`。
    * 如果函数定义在函数首次使用前出现，则函数定义可以充当函数原型，不必再另外提供函数原型。
    * 内联函数通常省略函数原型，使用函数定义替代。

### <span id = "2">2. 引用变量</span> --> [目录](#0)
* **引用是已定义的变量的别名**。
    * 引用变量的主要用途是用作函数的形参。通过将引用变量用作参数，函数将使用原始数据，而不是其副本。（与使用指针相似）
    * 使用`&`来声明引用。
    * **引用必须在声明时将其初始化**，而指针可以先声明后赋值。引用更接近const指针。
        * 不能通过赋值来设置引用。
    
* **按引用传递**，使被调用的函数能够访问调用函数中的变量。
    * 按引用传递时，被调用函数的引用参数被初始化为实参。
    * 按传递引用时，**实参应是变量**。
    * **仅当引用参数为const引用时，如果实参与引用参数不匹配，且满足下面两种情况时，C++将生成临时变量**：
        * 实参的类型正确，但不是左值；
        * 实参的类型不正确，但可以转换为正确的类型。
    * 应尽可能将引用形参声明为`const`：
        * 使用`const`引用可以避免无意中修改数据；
        * 使用`const`引用使函数能够处理`const`和非`const`实参，否则只能接受非`const`实参；
        * 使用`const`引用使函数能够正确生成并使用临时变量。
    
* 左值是可被引用的数据对象，例如：变量、数组元素、结构成员、引用、解除引用的指针。
* 非左值包括字面常量、包含多项式的表达式。

* 引用主要用于结构和类。使用方法与基本变量引用相同。
* 常规函数返回值是右值，而引用返回值是左值。返回引用的函数实际上是被引用的变量的别名。
    * **返回引用时，应避免返回函数中的临时变量和临时变量的指针**。（程序试图引用已经释放的内存，会崩溃）
    * 最简单的方法是，返回一个作为参数传递给函数的引用。
    * **若不允许给引用返回值赋值，则需将函数返回类型声明为`const`引用**。

* **继承**：将特性从一个类传递给另一个类。
    * 派生类继承了基类的方法。
    * **基类引用可以指向派生类对象**，无需进行强制类型转换。