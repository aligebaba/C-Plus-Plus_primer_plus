# 笔记 7 -- 内存模型和名称空间    （第九章）

### <span id = "0">0. 目录</span>
* [1. 单独编译](#1)
* [2. 存储持续性、作用域和链接性](#2)

***
* C++名称空间是另一种控制访问权的方式。
* 大型程序都由多个源代码文件组成，这些文件可能共享一些数据。这样的程序涉及到程序文件的单独编译。

### <span id = "1">1. 单独编译</span> --> [目录](#0)
* C++鼓励程序员将组件函数放在独立的文件中。

* 程序可以分为三部分：
    * 头文件：包含**结构声明**和使用这些结构的**函数的原型**。
    * 源代码文件：包含与结构有关的**函数的代码**。
    * 源代码文件：包含**调用**与结构有关的函数的代码。

* **头文件中常包含的内容**：
    * 函数原型
    * 使用#define或const定义的符号常量
    * 结构声明
    * 类声明
    * 模板声明
    * 内联函数

* 在同一个文件中**只能将同一个头文件包含一次**，使用预处理器编译指令`#ifndef`和`#endif`来避免多次包含头文件。

### <span id = "2">2. 存储持续性、作用域和链接性</span> --> [目录](#0)
* **自动存储**持续性：在函数定义中声明的变量。
* **静态存储**持续性：在函数定义外声明的变量、使用关键字static声明的变量。
* **动态存储**持续性：使用new运算符分配的内存一直存在，直到使用delete运算符释放为止。
* **线程存储**持续性：使用关键字thread_local声明的变量。

* **作用域**：变量名称在文件的多大范围内可见。
    * 作用域为局部，变量只在定义它的代码块中可用。
    * 作用域为全局，变量在定义位置到文件结尾之间都可用。

* **链接性**：变量名称如何在不同单元间共享。
    * 链接性为外部，变量名称可在文件间共享。
    * 链接性为外部，变量名称只能由一个文件中的函数共享。

* 自动存储持续性
    * **作用域为局部，没有链接性**（不能共享）。

    * **自动变量的数目随函数的开始和结束而增减，程序必须在运行时对自动变量进行管理**。常用的方法是留出一段内存，并将其视为栈。
        * 栈的默认长度取决于实现，但编译器提供改变栈长度的选项。
        * 程序使用两个指针跟踪栈，一个指向栈底————栈的开始位置，一个指向栈顶————下一个可用内存单元。
        * 栈是后进先出的（LIFO）
    
    * 关键字register只是显示地指出变量是自动的（**该关键字可有可无**）。